# K3s environment configuration
# Generated by Ansible - do not edit manually

{% if k3s_install_exact_version != '' %}
INSTALL_K3S_VERSION={{ k3s_install_exact_version }}
{% else %}
INSTALL_K3S_CHANNEL={{ k3s_install_channel }}
{% endif %}

{% if inventory_hostname in groups['masters'] %}
# Server configuration
INSTALL_K3S_EXEC="server {{ k3s_install_server_args | join(' ') }} --cluster-cidr={{ k3s_install_cluster_cidr }} --service-cidr={{ k3s_install_service_cidr }}{% for san in k3s_install_tls_sans %} --tls-san={{ san }}{% endfor %}"
{% else %}
# Agent configuration
K3S_URL=https://{{ k3s_install_api_endpoint }}:{{ k3s_install_server_port }}
K3S_TOKEN={{ k3s_token }}
INSTALL_K3S_EXEC="agent {{ k3s_install_agent_args | join(' ') }}"
{% endif %}
